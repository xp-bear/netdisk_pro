# 文件筛选功能说明

## ✅ 已完成功能

### 🔍 筛选条件

#### 1. **文件名搜索**
- 输入框实时搜索
- 支持中英文搜索
- 大小写不敏感
- 支持回车键搜索
- 支持清空按钮

#### 2. **日期范围筛选**
- 选择起始日期和结束日期
- 按文件创建时间筛选
- 支持快捷选择
- 日期格式：YYYY-MM-DD

#### 3. **文件大小筛选**
- **小于1MB**：0-1MB
- **1MB-10MB**：小文件
- **10MB-100MB**：中等文件
- **100MB-1GB**：大文件
- **大于1GB**：超大文件
- 文件夹不参与大小筛选（始终显示）

#### 4. **排序方式**
- **按名称排序**：字母顺序（支持中文拼音）
- **按时间排序**：最新的在前（默认）
- **按大小排序**：从大到小
- 文件夹始终排在文件前面

### 🎯 功能特点

#### 智能筛选
- ✅ 多条件组合筛选（所有条件同时生效）
- ✅ 实时响应（使用Vue计算属性）
- ✅ 文件夹特殊处理（不受大小筛选影响）
- ✅ 智能排序（文件夹优先）

#### 用户体验
- ✅ 筛选结果实时显示数量
- ✅ 一键重置所有筛选条件
- ✅ 激活状态提示
- ✅ 清空按钮快捷操作

#### 性能优化
- ✅ 使用计算属性（computed）自动缓存
- ✅ 避免不必要的重复计算
- ✅ 响应式更新

### 📖 使用方法

#### 文件名搜索
```
1. 在搜索框输入关键词
2. 按回车或自动搜索
3. 点击×清空搜索
```

#### 日期范围
```
1. 点击日期选择器
2. 选择开始日期和结束日期
3. 自动筛选该时间段内的文件
```

#### 文件大小
```
1. 点击大小下拉框
2. 选择大小范围
3. 文件夹始终显示
```

#### 排序方式
```
1. 点击排序下拉框
2. 选择排序方式
3. 文件夹始终在前
```

#### 重置筛选
```
点击"重置筛选"按钮，清空所有条件
```

### 💡 筛选逻辑

#### 多条件组合
所有筛选条件是**AND关系**（同时满足）：
```javascript
结果 = 文件名匹配 AND 日期范围匹配 AND 大小范围匹配
```

#### 优先级顺序
1. **文件名搜索** → 过滤不匹配的文件
2. **日期范围** → 过滤时间外的文件
3. **文件大小** → 过滤大小不符的文件（文件夹除外）
4. **排序** → 对结果排序（文件夹优先）

### 🎨 界面布局

```
┌─────────────────────────────────────────────────────────┐
│  [搜索框] [日期范围] [大小筛选] [排序方式]  [重置] [标签] │
└─────────────────────────────────────────────────────────┘
```

**左侧区域：**
- 搜索框（300px）
- 日期选择器（260px）
- 大小筛选（150px）
- 排序方式（150px）

**右侧区域：**
- 重置按钮
- 筛选状态标签（显示结果数量）

### 📊 筛选效果示例

#### 示例1：搜索照片
```
搜索：".jpg"
结果：显示所有包含".jpg"的文件
```

#### 示例2：查找大文件
```
大小：大于1GB
结果：显示所有超过1GB的文件 + 所有文件夹
```

#### 示例3：查找最近上传
```
日期：2025-01-01 至 2025-01-07
排序：按时间排序
结果：本周上传的文件，最新的在前
```

#### 示例4：组合筛选
```
搜索："报告"
日期：2025-01-01 至 2025-01-31
大小：10MB-100MB
排序：按名称排序
结果：1月份、10-100MB、文件名包含"报告"的文件，按名称排序
```

### 🔧 技术实现

#### 核心代码

**状态变量：**
```javascript
const searchKeyword = ref('')    // 搜索关键词
const dateRange = ref(null)      // 日期范围 [开始, 结束]
const sizeFilter = ref('')       // 文件大小："0-1", "1-10", etc.
const sortBy = ref('time')       // 排序方式：name/time/size
```

**计算属性：**
```javascript
const filteredTableData = computed(() => {
    // 1. 文件名筛选
    // 2. 日期筛选
    // 3. 大小筛选
    // 4. 排序
    return result
})
```

**函数：**
```javascript
handleSearch()      // 执行搜索（由计算属性自动处理）
resetFilters()      // 重置所有筛选条件
```

### 📋 文件大小对照表

| 选项 | 范围 | 说明 |
|------|------|------|
| 小于1MB | 0-1MB | 小文件（文档、图片） |
| 1MB-10MB | 1-10MB | 中小文件（照片、音频） |
| 10MB-100MB | 10-100MB | 中等文件（视频、压缩包） |
| 100MB-1GB | 100-1024MB | 大文件（高清视频） |
| 大于1GB | >1024MB | 超大文件（4K视频、软件） |

### 🎯 特殊处理

#### 文件夹
- 不参与文件大小筛选
- 始终排在文件前面
- 支持按名称和时间排序

#### 空值处理
- 无创建时间的文件不显示在日期筛选结果中
- 无大小的文件视为0字节

#### 中文排序
- 使用 `localeCompare('zh-CN')` 支持中文拼音排序

### 🚀 性能特点

- ✅ **响应式更新**：计算属性自动缓存和更新
- ✅ **避免重复计算**：只在依赖项变化时重新计算
- ✅ **高效排序**：先分组再排序
- ✅ **实时反馈**：输入即筛选，无需点击按钮

### 📦 相关组件

```
Element Plus:
- el-input (搜索框)
- el-date-picker (日期选择器)
- el-select (下拉选择)
- el-button (按钮)
- el-tag (标签)
- el-icon (图标)
```

### 💎 用户体验细节

1. **清空快捷键**：搜索框支持清空按钮
2. **回车搜索**：输入框支持回车键触发
3. **视觉反馈**：显示筛选结果数量
4. **快速重置**：一键清空所有条件
5. **自动响应**：无需手动点击搜索按钮

## 🎉 使用效果

筛选功能已完全集成到列表和卡片视图中，支持实时筛选和多条件组合，提供流畅的用户体验！
